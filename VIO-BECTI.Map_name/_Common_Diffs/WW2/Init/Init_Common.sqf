CTI_CO_FNC_AddSideFunds = compileFinal preprocessFileLineNumbers "Common\Functions\Common_AddSideFunds.sqf";
CTI_CO_FNC_ArrayDiffers = compileFinal preprocessFileLineNumbers "Common\Functions\Common_ArrayDiffers.sqf";
CTI_CO_FNC_ArrayShuffle = compileFinal preprocessFileLineNumbers "Common\Functions\Common_ArrayShuffle.sqf";
CTI_CO_FNC_ArrayToLower = compileFinal preprocessFileLineNumbers "Common\Functions\Common_ArrayToLower.sqf";
CTI_CO_FNC_ChangeFunds = compileFinal preprocessFileLineNumbers "Common\Functions\Common_ChangeFunds.sqf";
CTI_CO_FNC_ChangeFundsCommander = compileFinal preprocessFileLineNumbers "Common\Functions\Common_ChangeFundsCommander.sqf";
CTI_CO_FNC_ChangeSideSupply = compileFinal preprocessFileLineNumbers "Common\Functions\Common_ChangeSideSupply.sqf";
CTI_CO_FNC_ChangeFundsTeam = compileFinal preprocessFileLineNumbers "Common\Functions\Common_ChangeFundsTeam.sqf";
CTI_CO_FNC_ConvertGearToFlat = compileFinal preprocessFileLineNumbers "Common\Functions\Common_ConvertGearToFlat.sqf";
CTI_CO_FNC_CreateTeam = compileFinal preprocessFileLineNumbers "Common\Functions\Common_CreateTeam.sqf";
CTI_CO_FNC_CreateTownUnits = compileFinal preprocessFileLineNumbers "Common\Functions\Common_CreateTownUnits.sqf";
CTI_CO_FNC_CreateUnit = compileFinal preprocessFileLineNumbers "Common\Functions\Common_CreateUnit.sqf";
CTI_CO_FNC_CreateVehicle = compileFinal preprocessFileLineNumbers "Common\Functions\Common_CreateVehicle.sqf";
CTI_CO_FNC_EquipContainerBackpack = compileFinal preprocessFileLineNumbers "Common\Functions\Common_EquipContainerBackpack.sqf";
CTI_CO_FNC_EquipContainerUniform = compileFinal preprocessFileLineNumbers "Common\Functions\Common_EquipContainerUniform.sqf";
CTI_CO_FNC_EquipContainerVest = compileFinal preprocessFileLineNumbers "Common\Functions\Common_EquipContainerVest.sqf";
CTI_CO_FNC_EquipUnit = compileFinal preprocessFileLineNumbers "Common\Functions\Common_EquipUnit.sqf";
CTI_CO_FNC_EquipVehicleCargoSpace = compileFinal preprocessFileLineNumbers "Common\Functions\Common_EquipVehicleCargoSpace.sqf";
CTI_CO_FNC_GetAreaEnemiesCount = compileFinal preprocessFileLineNumbers "Common\Functions\Common_GetAreaEnemiesCount.sqf";
CTI_CO_FNC_GetClosestEnemyTown = compileFinal preprocessFileLineNumbers "Common\Functions\Common_GetClosestEnemyTown.sqf";
CTI_CO_FNC_GetClosestEntity = compileFinal preprocessFileLineNumbers "Common\Functions\Common_GetClosestEntity.sqf";
CTI_CO_FNC_GetClosestFriendlyTown = compileFinal preprocessFileLineNumbers "Common\Functions\Common_GetClosestFriendlyTown.sqf";
CTI_CO_FNC_GetClosestStructure = compileFinal preprocessFileLineNumbers "Common\Functions\Common_GetClosestStructure.sqf";
CTI_CO_FNC_GetClosestTown = compileFinal preprocessFileLineNumbers "Common\Functions\Common_GetClosestTown.sqf";
CTI_CO_FNC_GetDirTo = compileFinal preprocessFileLineNumbers "Common\Functions\Common_GetDirTo.sqf";
CTI_CO_FNC_GetEmptyPosition = compileFinal preprocessFileLineNumbers "Common\Functions\Common_GetEmptyPosition.sqf";
CTI_CO_FNC_GetEnemyTowns = compileFinal preprocessFileLineNumbers "Common\Functions\Common_GetEnemyTowns.sqf";
CTI_CO_FNC_GetFriendlyCamps = compileFinal preprocessFileLineNumbers "Common\Functions\Common_GetFriendlyCamps.sqf";
CTI_CO_FNC_GetFriendlyTowns = compileFinal preprocessFileLineNumbers "Common\Functions\Common_GetFriendlyTowns.sqf";
CTI_CO_FNC_GetFunds = compileFinal preprocessFileLineNumbers "Common\Functions\Common_GetFunds.sqf";
CTI_CO_FNC_GetFundsCommander = compileFinal preprocessFileLineNumbers "Common\Functions\Common_GetFundsCommander.sqf";
CTI_CO_FNC_GetFundsTeam = compileFinal preprocessFileLineNumbers "Common\Functions\Common_GetFundsTeam.sqf";
CTI_CO_FNC_GetGearItemCost = compileFinal preprocessFileLineNumbers "Common\Functions\Common_GetGearItemCost.sqf";
CTI_CO_FNC_GetHostilesInArea = compileFinal preprocessFileLineNumbers "Common\Functions\Common_GetHostilesInArea.sqf";
CTI_CO_FNC_GetItemBaseConfig = compileFinal preprocessFileLineNumbers "Common\Functions\Common_GetItemBaseConfig.sqf";
CTI_CO_FNC_GetLiveUnits = compileFinal preprocessFileLineNumbers "Common\Functions\Common_GetLiveUnits.sqf";
CTI_CO_FNC_GetNearestSpecialVehicles = compileFinal preprocessFileLineNumbers "Common\Functions\Common_GetNearestSpecialVehicles.sqf";
CTI_CO_FNC_GetPositionFrom = compileFinal preprocessFileLineNumbers "Common\Functions\Common_GetPositionFrom.sqf";
CTI_CO_FNC_GetRandomPosition = compileFinal preprocessFileLineNumbers "Common\Functions\Common_GetRandomPosition.sqf";
CTI_CO_FNC_GetSideColoration = compileFinal preprocessFileLineNumbers "Common\Functions\Common_GetSideColoration.sqf";
CTI_CO_FNC_GetSideCommander = compileFinal preprocessFileLineNumbers "Common\Functions\Common_GetSideCommander.sqf";
CTI_CO_FNC_GetSideFromID = compileFinal preprocessFileLineNumbers "Common\Functions\Common_GetSideFromID.sqf";
CTI_CO_FNC_GetSideGroups = compileFinal preprocessFileLineNumbers "Common\Functions\Common_GetSideGroups.sqf";
CTI_CO_FNC_GetSideHQ = compileFinal preprocessFileLineNumbers "Common\Functions\Common_GetSideHQ.sqf";
CTI_CO_FNC_GetSideHQDeployStatus = compileFinal preprocessFileLineNumbers "Common\Functions\Common_GetSideHQDeployStatus.sqf";
CTI_CO_FNC_GetSideID = compileFinal preprocessFileLineNumbers "Common\Functions\Common_GetSideID.sqf";
CTI_CO_FNC_GetSideLogic = compileFinal preprocessFileLineNumbers "Common\Functions\Common_GetSideLogic.sqf";
CTI_CO_FNC_GetSidePlayerGroups = compileFinal preprocessFileLineNumbers "Common\Functions\Common_GetSidePlayerGroups.sqf";
CTI_CO_FNC_GetSideStructures = compileFinal preprocessFileLineNumbers "Common\Functions\Common_GetSideStructures.sqf";
CTI_CO_FNC_GetSideStructuresByType = compileFinal preprocessFileLineNumbers "Common\Functions\Common_GetSideStructuresByType.sqf";
CTI_CO_FNC_GetSideSupply = compileFinal preprocessFileLineNumbers "Common\Functions\Common_GetSideSupply.sqf";
CTI_CO_FNC_GetSideTownCount = compileFinal preprocessFileLineNumbers "Common\Functions\Common_GetSideTownCount.sqf";
CTI_CO_FNC_GetSideTowns = compileFinal preprocessFileLineNumbers "Common\Functions\Common_GetSideTowns.sqf";
CTI_CO_FNC_GetSideUpgrades = compileFinal preprocessFileLineNumbers "Common\Functions\Common_GetSideUpgrades.sqf";
CTI_CO_FNC_GetTeamVehicles = compileFinal preprocessFileLineNumbers "Common\Functions\Common_GetTeamVehicles.sqf";
CTI_CO_FNC_GetTotalCamps = Compile preprocessFileLineNumbers "Common\Functions\Common_GetTotalCamps.sqf";
CTI_CO_FNC_GetTotalCampsOnSide = Compile preprocessFileLineNumbers "Common\Functions\Common_GetTotalCampsOnSide.sqf";
CTI_CO_FNC_GetTownsResources = compileFinal preprocessFileLineNumbers "Common\Functions\Common_GetTownsResources.sqf";
CTI_CO_FNC_GetUnitsScore = compileFinal preprocessFileLineNumbers "Common\Functions\Common_GetUnitsScore.sqf";
CTI_CO_FNC_GetUnitsPerSide = compileFinal preprocessFileLineNumbers "Common\Functions\Common_GetUnitsPerSide.sqf";
CTI_CO_FNC_GetVehicleTurrets = compileFinal preprocessFileLineNumbers "Common\Functions\Common_GetVehicleTurrets.sqf";
CTI_CO_FNC_HasOrderedChanged = compileFinal preprocessFileLineNumbers "Common\Functions\Common_HasOrderedChanged.sqf";
CTI_CO_FNC_HasStructure = compileFinal preprocessFileLineNumbers "Common\Functions\Common_HasStructure.sqf";
CTI_CO_FNC_HasUpgrade = compileFinal preprocessFileLineNumbers "Common\Functions\Common_HasUpgrade.sqf";
CTI_CO_FNC_InitializeCustomVehicle = compileFinal preprocessFileLineNumbers "Common\Functions\Common_InitializeCustomVehicle.sqf";
CTI_CO_FNC_InitializeNetVehicle = compileFinal preprocessFileLineNumbers "Common\Functions\Common_InitializeNetVehicle.sqf";
CTI_CO_FNC_IsGroupPlayable = compileFinal preprocessFileLineNumbers "Common\Functions\Common_IsGroupPlayable.sqf";
CTI_CO_FNC_ManVehicle = compileFinal preprocessFileLineNumbers "Common\Functions\Common_ManVehicle.sqf";
CTI_CO_FNC_MarkerUpdate = compileFinal preprocessFileLineNumbers "Common\Functions\Common_MarkerUpdate.sqf";
CTI_CO_FNC_NetSend = compileFinal preprocessFileLineNumbers "Common\Functions\Common_NetSend.sqf";
CTI_CO_FNC_OnHQHandleDamage = compileFinal preprocessFileLineNumbers "Common\Functions\Common_OnHQHandleDamage.sqf";
CTI_CO_FNC_OnPVFReceived = compileFinal preprocessFileLineNumbers "Common\Functions\Common_OnPVFReceived.sqf";
CTI_CO_FNC_OnUnitGetOut = compileFinal preprocessFileLineNumbers "Common\Functions\Common_OnUnitGetOut.sqf";
CTI_CO_FNC_OnUnitHit = compileFinal preprocessFileLineNumbers "Common\Functions\Common_OnUnitHit.sqf";
CTI_CO_FNC_OnUnitKilled = compileFinal preprocessFileLineNumbers "Common\Functions\Common_OnUnitKilled.sqf";
CTI_CO_FNC_PlaceNear = compileFinal preprocessFileLineNumbers "Common\Functions\Common_PlaceNear.sqf";
CTI_CO_FNC_PlaceSafe = compileFinal preprocessFileLineNumbers "Common\Functions\Common_PlaceSafe.sqf";
CTI_CO_FNC_RearmVehicle = compileFinal preprocessFileLineNumbers "Common\Functions\Common_RearmVehicle.sqf";
CTI_CO_FNC_RemoveWaypoints = compileFinal preprocessFileLineNumbers "Common\Functions\Common_RemoveWaypoints.sqf";
CTI_CO_FNC_RevealArea = compileFinal preprocessFileLineNumbers "Common\Functions\Common_RevealArea.sqf";
CTI_CO_FNC_SortByDistance = compileFinal preprocessFileLineNumbers "Common\Functions\Common_SortByDistance.sqf";
CTI_CO_FNC_SanitizeAircraft = compileFinal preprocessFileLineNumbers "Common\Functions\Common_SanitizeAircraft.sqf";
CTI_CO_FNC_SanitizeAircraftAA = compileFinal preprocessFileLineNumbers "Common\Functions\Common_SanitizeAircraftAA.sqf";
CTI_CO_FNC_SanitizeAircraftAT = compileFinal preprocessFileLineNumbers "Common\Functions\Common_SanitizeAircraftAT.sqf";
CTI_CO_FNC_SanitizeAircraftCM = compileFinal preprocessFileLineNumbers "Common\Functions\Common_SanitizeAircraftCM.sqf";
CTI_CO_FNC_SanitizeAircraftFFAR = compileFinal preprocessFileLineNumbers "Common\Functions\Common_SanitizeAircraftFFAR.sqf";
CTI_CO_FNC_SanitizeArtillery = compileFinal preprocessFileLineNumbers "Common\Functions\Common_SanitizeArtillery.sqf";
CTI_CO_FNC_SetCommanderVotes = compileFinal preprocessFileLineNumbers "Common\Functions\Common_SetCommanderVotes.sqf";

CTI_CO_FNC_GetTechmatrix = compileFinal preprocessFileLineNumbers "Common\Functions\Common_GetTechmatrix.sqf";
CTI_CO_FNC_MergeMatrixArray = compileFinal preprocessFileLineNumbers "Common\Functions\Common_MergeMatrixArray.sqf";
CTI_CO_FNC_CheckCountUp = compileFinal preprocessFileLineNumbers "Common\Functions\Common_CheckCountUp.sqf";
CTI_CO_FNC_GetSideDefenses = compileFinal preprocessFileLineNumbers "Common\Functions\Common_GetSideDefenses.sqf";
CTI_CO_FNC_GetCalculatedUnitsPrize = compileFinal preprocessFileLineNumbers "Common\Functions\Common_GetCalculatedUnitsPrize.sqf";
CTI_CO_FNC_GetCalculatedBuildtime = compileFinal preprocessFileLineNumbers "Common\Functions\Common_GetCalculatedBuildtime.sqf";
CTI_CO_FNC_GetCalculatedItemPrize = compileFinal preprocessFileLineNumbers "Common\Functions\Common_GetCalculatedItemPrize.sqf";
CTI_CO_FNC_ScanSkyForPlanes = compileFinal preprocessFileLineNumbers "Common\Functions\Common_ScanSkyForPlanes.sqf";
CTI_CO_FNC_DisbandTeam = compileFinal preprocessFileLineNumbers "Common\Functions\Common_DisbandTeam.sqf";
CTI_CO_FNC_ManageStatistics = compileFinal preprocessFileLineNumbers "Common\Functions\Common_ManageStatistics.sqf";
CTI_CO_FNC_HasDLC = compileFinal preprocessFileLineNumbers "Common\Functions\Common_HasDLC.sqf";
CTI_CO_FNC_IsSidePatchLoaded = compileFinal preprocessFileLineNumbers "Common\Functions\Common_IsSidePatchLoaded.sqf";
CTI_CO_FNC_SetUnitIdentity = compileFinal preprocessFileLineNumbers "Common\Functions\Common_SetUnitIdentity.sqf";
CTI_CO_FNC_EquipVehicle = compileFinal preprocessFileLineNumbers "Common\Functions\Common_EquipVehicle.sqf";
if(CTI_IFA_ADDON >= 1) then {	//only if IFA3 loaded
	CTI_CO_FNC_DropParatroopers = compileFinal preprocessFileLineNumbers "Common\Functions\Common_DropParatroopers.sqf";
	WW2_PARADROP = compile preprocessFileLineNumbers "WW2\Core_f\WW2_System_Curator_F\waypoints\fn_wpParadrop.sqf";
};

CTI_CO_CustomIterator = 0;

//calculate the main mod depends on the given parameters
_mainmod = -1;

//geather the possible main mods first 
_fixed_main = [];
_loaded_main = [];
if(CTI_SPE_DLC > 1 && [1175380] call CTI_CO_FNC_HasDLC) then {};
if([1175380] call CTI_CO_FNC_HasDLC) then {
	if(CTI_SPE_DLC > 0) then {_loaded_main pushBack CTI_SPE_ID};
	if(CTI_SPE_DLC > 1) then {_fixed_main pushBack CTI_SPE_ID};
};
if(CTI_IFA_ADDON > 0) then {_loaded_main pushBack CTI_IFA_ID};
if(CTI_IFA_ADDON > 1) then {_fixed_main pushBack CTI_IFA_ID};
if(CTI_CSA_ADDON > 0) then {_loaded_main pushBack CTI_CSA_ID};
if(CTI_CSA_ADDON > 1) then {_fixed_main pushBack CTI_CSA_ID};
if(CTI_NF_ADDON > 0) then {_loaded_main pushBack CTI_NF_ID};
if(CTI_NF_ADDON > 1) then {_fixed_main pushBack CTI_NF_ID};
if(CTI_FOW_ADDON > 0) then {_loaded_main pushBack CTI_FOW_ID};
if(CTI_FOW_ADDON > 1) then {_fixed_main pushBack CTI_FOW_ID};

["TEST", "FILE: Common\Init\Init_Common.sqf", format ["Main Mod: _fixed_main <%1> --- _loaded_main <%2>", _fixed_main, _loaded_main]] call CTI_CO_FNC_Log;
//now search for the best main mod
if(count _fixed_main > 0) then {
	_mainmod = _fixed_main select 0;
	["TEST", "FILE: Common\Init\Init_Common.sqf", format ["Main Mod found: _fixed_main <%1> ", _mainmod]] call CTI_CO_FNC_Log;
};
if(_mainmod == -1) then {
	_mainmod = _loaded_main select 0;
	["TEST", "FILE: Common\Init\Init_Common.sqf", format ["No fixed mod found, first loaded: _loaded_main <%1> ", _mainmod]] call CTI_CO_FNC_Log;
};

//now with the mainmod known, we gather all possible nations
_nations = [];

if(CTI_SPE_DLC > 0) then {
	_nations pushBackUnique CTI_GER_ID;	//CTI_GER_SIDE;
	_nations pushBackUnique CTI_US_ID;	//CTI_US_SIDE;
	_nations pushBackUnique CTI_FR_ID;	//CTI_FR_SIDE;
};
if(CTI_IFA_ADDON > 0) then {
	_nations pushBackUnique CTI_GER_ID;	//CTI_GER_SIDE;
	_nations pushBackUnique CTI_SOV_ID;	//CTI_SOV_SIDE;
	_nations pushBackUnique CTI_US_ID;	//CTI_US_SIDE;
	_nations pushBackUnique CTI_UK_ID;	//CTI_UK_SIDE;
};
if(CTI_CSA_ADDON > 0) then {
	_nations pushBackUnique CTI_GER_ID;	//CTI_GER_SIDE;
	_nations pushBackUnique CTI_CZ_ID;	//CTI_CZ_SIDE;
	_nations pushBackUnique CTI_UK_ID;	//CTI_UK_SIDE;
};
if(CTI_NF_ADDON > 0) then {
	_nations pushBackUnique CTI_FIN_ID;	//CTI_FIN_SIDE;
	_nations pushBackUnique CTI_SOV_ID;	//CTI_SOV_SIDE;
};
if(CTI_FOW_ADDON > 0) then {
	_nations pushBackUnique CTI_US_ID;	//CTI_US_SIDE;
	_nations pushBackUnique CTI_JPN_ID;	//CTI_JPN_SIDE;
	_nations pushBackUnique CTI_GER_ID;	//CTI_GER_SIDE;
	_nations pushBackUnique CTI_UK_ID;	//CTI_UK_SIDE;
};
["TEST", "FILE: Common\Init\Init_Common.sqf", format ["gathered _nations: <%1>", _nations]] call CTI_CO_FNC_Log;

_nations_east = [];
_nations_west = [];
_nations_guer = [];
{
	nation_param = -1;
	switch(_x) do {
		case CTI_GER_ID: {nation_param = CTI_GER_SIDE};
		case CTI_SOV_ID: {nation_param = CTI_SOV_SIDE};
		case CTI_UK_ID: {nation_param = CTI_UK_SIDE};
		case CTI_US_ID: {nation_param = CTI_US_SIDE};
		case CTI_JPN_ID: {nation_param = CTI_JPN_SIDE};
		case CTI_CZ_ID: {nation_param = CTI_CZ_SIDE};
		case CTI_FIN_ID: {nation_param = CTI_FIN_SIDE};
		case CTI_FR_ID: {nation_param = CTI_FR_SIDE};
		default {};
	};
	["TEST", "FILE: Common\Init\Init_Common.sqf", format ["sorting nations: <%1> <%2>", nation_param, _x]] call CTI_CO_FNC_Log;
	switch(nation_param) do {
		case 0: {_nations_west pushBack _x};
		case 1: {_nations_east pushBack _x};
		case 2: {_nations_guer pushBack _x};
		default {};
	};
} forEach _nations;
["TEST", "FILE: Common\Init\Init_Common.sqf", format ["gathered _nations per side: east<%1> west<%2> guer<%3>", _nations_east, _nations_west, _nations_guer]] call CTI_CO_FNC_Log;

_nation = -1;
{
	_nation = -1;
	switch(_x select 2) do {
		case 0: {if(CTI_GER_ID in (_x select 1)) then {_nation = CTI_GER_ID}};	//Germany [IFA3]
		case 1: {if(CTI_SOV_ID in (_x select 1)) then {_nation = CTI_SOV_ID}};	//Soviet Red Army [IFA3]
		case 2: {if(CTI_US_ID in (_x select 1)) then {_nation = CTI_US_ID}};	//US Army [IFA3]
		case 3: {if(CTI_UK_ID in (_x select 1)) then {_nation = CTI_UK_ID}};	//UK Army [IFA3]
		case 4: {if(CTI_GER_ID in (_x select 1)) then {_nation = CTI_GER_ID}};	//Germany [FoW]
		case 5: {if(CTI_JPN_ID in (_x select 1)) then {_nation = CTI_JPN_ID}};	//Japain [FoW]
		case 6: {if(CTI_US_ID in (_x select 1)) then {_nation = CTI_US_ID}};	//US [FoW]
		case 7: {if(CTI_UK_ID in (_x select 1)) then {_nation = CTI_UK_ID}};	//UK [FoW]
		case 8: {if(CTI_GER_ID in (_x select 1)) then {_nation = CTI_GER_ID}};	//Germany [CSA]
		case 9: {if(CTI_CZ_ID in (_x select 1)) then {_nation = CTI_CZ_ID}};	//Czech [CSA]
		case 10: {if(CTI_UK_ID in (_x select 1)) then {_nation = CTI_UK_ID}};	//UK [CSA]
		case 11: {if(CTI_FIN_ID in (_x select 1)) then {_nation = CTI_FIN_ID}};	//Finnish Army [FN]
		case 12: {if(CTI_SOV_ID in (_x select 1)) then {_nation = CTI_SOV_ID}};	//Soviet Red Army [FN]
		case 13: {if(CTI_FR_ID in (_x select 1)) then {_nation = CTI_FR_ID}};	//FR Army [SPE]
		case 14: {if(CTI_GER_ID in (_x select 1)) then {_nation = CTI_GER_ID}};	//Germany [SPE]
		case 15: {if(CTI_US_ID in (_x select 1)) then {_nation = CTI_US_ID}};	//US Army [SPE]
		default {};
	};
	["TEST", "FILE: Common\Init\Init_Common.sqf", format ["first try to set the nation: %1 <%2>", _x select 0, _nation]] call CTI_CO_FNC_Log;
	if(_nation == -1) then {
		_nation = (_x select 1) select 0;
	};
	["TEST", "FILE: Common\Init\Init_Common.sqf", format ["second try to set the nation: %1 <%2> <%3>", _x select 0, _nation, ((_x select 1) select 0)]] call CTI_CO_FNC_Log;

	missionNamespace setVariable [format ["CTI_%1_MAINNATIONS", _x select 0], [_nation, _mainmod]];
	["TEST", "FILE: Common\Init\Init_Common.sqf", format ["Final found setup: nation <%1> --- mainmod <%2>", _nation, _mainmod]] call CTI_CO_FNC_Log;
	[_x select 0, _nation, _mainmod] call compile preprocessFileLineNumbers "Common\Config\Gear\gear_start_config.sqf";
} forEach [[west,_nations_west,CTI_WEST_AI],[east,_nations_east,CTI_EAST_AI]];

/*{
	switch true do {
		case (((CTI_GER_SIDE) call CTI_CO_FNC_GetSideFromID) == _x): {
			_nation = CTI_GER_ID;
			switch true do
			{
				case (CTI_SPE_DLC > 1 && [1175380] call CTI_CO_FNC_HasDLC): {_mainmod = CTI_SPE_ID};
				case (CTI_IFA_ADDON > 1): {_mainmod = CTI_IFA_ID};
				case (CTI_CSA_ADDON > 1): {_mainmod = CTI_CSA_ID};
				case (CTI_FOW_ADDON > 1): {_mainmod = CTI_FOW_ID};
				case (CTI_SPE_DLC > 0 && [1175380] call CTI_CO_FNC_HasDLC): {_mainmod = CTI_SPE_ID};
				case (CTI_IFA_ADDON > 0 && CTI_CSA_ADDON < 2 && (CTI_SPE_DLC < 2 || [1175380] call CTI_CO_FNC_HasDLC == false)): {_mainmod = CTI_IFA_ID};
				case (CTI_CSA_ADDON > 0 && CTI_IFA_ADDON < 2 && (CTI_SPE_DLC < 2 || [1175380] call CTI_CO_FNC_HasDLC == false)): {_mainmod = CTI_CSA_ID};
				case (CTI_FOW_ADDON > 0 && CTI_IFA_ADDON < 2): {_mainmod = CTI_FOW_ID};
				default {};
			};
		};
		case (((CTI_SOV_SIDE) call CTI_CO_FNC_GetSideFromID) == _x): {
			_nation = CTI_SOV_ID;
			switch true do
			{
				case (CTI_IFA_ADDON > 1): {_mainmod = CTI_IFA_ID};
				case (CTI_NF_ADDON > 1): {_mainmod = CTI_NF_ID};
				case (CTI_IFA_ADDON > 0 && CTI_NF_ADDON < 2): {_mainmod = CTI_IFA_ID};
				case (CTI_NF_ADDON > 0 && CTI_IFA_ADDON < 2): {_mainmod = CTI_NF_ID};
				default {};
			};
		};
		case (((CTI_US_SIDE) call CTI_CO_FNC_GetSideFromID) == _x): {
			_nation = CTI_US_ID;
			switch true do
			{
				case (CTI_IFA_ADDON > 1): {_mainmod = CTI_IFA_ID};
				case (CTI_CSA_ADDON > 1): {_mainmod = CTI_CSA_ID};
				case (CTI_FOW_ADDON > 1): {_mainmod = CTI_FOW_ID};
				case (CTI_IFA_ADDON > 0 && CTI_CSA_ADDON < 2): {_mainmod = CTI_IFA_ID};
				case (CTI_CSA_ADDON > 0 && CTI_IFA_ADDON < 2): {_mainmod = CTI_CSA_ID};
				case (CTI_FOW_ADDON > 0 && CTI_IFA_ADDON < 2): {_mainmod = CTI_FOW_ID};
				default {};
			};
		};
		case (((CTI_UK_SIDE) call CTI_CO_FNC_GetSideFromID) == _x): {
			_nation = CTI_UK_ID;
			switch true do
			{
				case (CTI_SPE_DLC > 1 && [1175380] call CTI_CO_FNC_HasDLC): {_mainmod = CTI_SPE_ID};
				case (CTI_IFA_ADDON > 1): {_mainmod = CTI_IFA_ID};
				case (CTI_FOW_ADDON > 1): {_mainmod = CTI_FOW_ID};
				case (CTI_SPE_DLC > 0 && [1175380] call CTI_CO_FNC_HasDLC): {_mainmod = CTI_SPE_ID};
				case (CTI_IFA_ADDON > 0 && CTI_FOW_ADDON < 2 && (CTI_SPE_DLC < 2 || [1175380] call CTI_CO_FNC_HasDLC == false)): {_mainmod = CTI_IFA_ID};
				case (CTI_FOW_ADDON > 0 && CTI_IFA_ADDON < 2 && (CTI_SPE_DLC < 2 || [1175380] call CTI_CO_FNC_HasDLC == false)): {_mainmod = CTI_FOW_ID};
				default {};
			};
		};
		case (((CTI_JPN_SIDE) call CTI_CO_FNC_GetSideFromID) == _x): {
			_nation = CTI_JPN_ID;
			switch true do
			{
				case (CTI_FOW_ADDON > 0): {_mainmod = CTI_FOW_ID};
				default {};
			};
		};
		case (((CTI_CZ_SIDE) call CTI_CO_FNC_GetSideFromID) == _x): {
			_nation = CTI_CZ_ID;
			switch true do
			{
				case (CTI_CSA_ADDON > 0): {_mainmod = CTI_CSA_ID};
				default {};
			};
		};
		case (((CTI_FIN_SIDE) call CTI_CO_FNC_GetSideFromID) == _x): {
			_nation = CTI_FIN_ID;
			switch true do
			{
				case (CTI_NF_ADDON > 0): {_mainmod = CTI_NF_ID};
				default {};
			};
		};
		case (((CTI_FR_SIDE) call CTI_CO_FNC_GetSideFromID) == _x): {
			_nation = CTI_FR_ID;
		};
		default {};
	};

	switch (missionNamespace getVariable format["CTI_%1_AI", _x]) do {
		case (CTI_GER_ID): {_nation = CTI_GER_ID};
		case (CTI_SOV_ID): {_nation = CTI_SOV_ID};
		case (CTI_UK_ID): {_nation = CTI_UK_ID};
		case (CTI_US_ID): {_nation = CTI_US_ID};
		case (CTI_JPN_ID): {_nation = CTI_JPN_ID};
		case (CTI_CZ_ID): {_nation = CTI_CZ_ID};
		case (CTI_FIN_ID): {_nation = CTI_FIN_ID};
		case (CTI_FR_ID): {_nation = CTI_FR_ID};
		case (CTI_POL_ID): {_nation = CTI_POL_ID};
		default {};
	};

	if(_mainmod == -1 || _nation == -1) then {["ERROR", "FILE: Common\Init\Init_Common.sqf", format ["Main Nation and/or Mod config didn't match: side %1 NationID <%2> MainMod: <%3>", _x, _nation, _mainmod]] call CTI_CO_FNC_Log;};
	if (CTI_Log_Level >= CTI_Log_Information) then {["INFORMATION", "FILE: Common\Init\Init_Common.sqf", format ["Start gear config: side %1 NationID <%2> MainMod: <%3>", _x, _nation, _mainmod]] call CTI_CO_FNC_Log};
	missionNamespace setVariable [format ["CTI_%1_MAINNATIONS", _x], [_nation, _mainmod]];
	[_x, _nation, _mainmod] call compile preprocessFileLineNumbers "Common\Config\Gear\gear_start_config.sqf";
} forEach [west,east];
missionNamespace getVariable format ["CTI_%1_MAINNATIONS", west];*/

call compile preprocessFileLineNumbers "Common\Config\Units\Techmatrix.sqf";

call compile preprocessFileLineNumbers "Common\Config\Artillery\Artillery.sqf";

(west) call compile preprocessFileLineNumbers "Common\Config\Base\Base.sqf";
(east) call compile preprocessFileLineNumbers "Common\Config\Base\Base.sqf";

(west) call compile preprocessFileLineNumbers "Common\Config\Base\Town_Defenses.sqf";
(east) call compile preprocessFileLineNumbers "Common\Config\Base\Town_Defenses.sqf";
(resistance) call compile preprocessFileLineNumbers "Common\Config\Base\Town_Defenses.sqf";

//CTI_FR_SIDE declaration
if(CTI_FR_SIDE >= 0) then {
	if(CTI_SPE_DLC >= 1) then {
		((CTI_FR_SIDE) call CTI_CO_FNC_GetSideFromID) call compile preprocessFileLineNumbers "Common\Config\Units\units_FR_SPE.sqf";
		((CTI_FR_SIDE) call CTI_CO_FNC_GetSideFromID) call compile preprocessFileLineNumbers "Common\Config\Factories\factory_FR_SPE.sqf";
		//_skip = false;
		//if(CTI_IFA_ADDON == 2 || CTI_SPE_DLC == 2 || CTI_FOW_ADDON == 2 || CTI_CSA_ADDON == 2 || CTI_NF_ADDON == 2) then {
		//	if!(CTI_SPE_DLC == 2) exitWith {_skip = true;["VIOC_DEBUG", "FILE: common\init\Init_Common.sqf", "Town Squad preparation skipped"] call CTI_CO_FNC_Log;};
		//};
		//if(_skip == false) then {
			if((CTI_FR_SIDE == 0 && CTI_WEST_AI < 0) || (CTI_FR_SIDE == 1 && CTI_EAST_AI < 0)) then {
				((CTI_FR_SIDE) call CTI_CO_FNC_GetSideFromID) call compile preprocessFileLineNumbers "Common\Config\Squads\squad_FR_SPE.sqf";
			};
			if((CTI_FR_SIDE == 0 && CTI_WEST_TOWNS < 0) || (CTI_FR_SIDE == 1 && CTI_EAST_TOWNS < 0) || (CTI_FR_SIDE == 2 && CTI_GUER_TOWNS == 2)) then {
				((CTI_FR_SIDE) call CTI_CO_FNC_GetSideFromID) call compile preprocessFileLineNumbers "Common\Config\Towns\towns_FR_SPE.sqf";
			};
		//};
		((CTI_FR_SIDE) call CTI_CO_FNC_GetSideFromID) call compile preprocessFileLineNumbers "Common\Config\Gear\Gear_FR_SPE.sqf";
	};
};
//CTI_NOR_SIDE declaration
if(CTI_FIN_SIDE >= 0) then {
	if(CTI_NF_ADDON > 0) then {
		((CTI_FIN_SIDE) call CTI_CO_FNC_GetSideFromID) call compile preprocessFileLineNumbers "Common\Config\Units\units_FIN_NF.sqf";
		((CTI_FIN_SIDE) call CTI_CO_FNC_GetSideFromID) call compile preprocessFileLineNumbers "Common\Config\Factories\factory_FIN_NF.sqf";
		if((CTI_FIN_SIDE == 0 && CTI_WEST_AI < 0) || (CTI_FIN_SIDE == 1 && CTI_EAST_AI < 0)) then {
			((CTI_FIN_SIDE) call CTI_CO_FNC_GetSideFromID) call compile preprocessFileLineNumbers "Common\Config\Squads\squad_FIN_NF.sqf";
		};
		if((CTI_FIN_SIDE == 0 && CTI_WEST_TOWNS < 0) || (CTI_FIN_SIDE == 1 && CTI_EAST_TOWNS < 0) || (CTI_FIN_SIDE == 2 && CTI_GUER_TOWNS == 2)) then {
			((CTI_FIN_SIDE) call CTI_CO_FNC_GetSideFromID) call compile preprocessFileLineNumbers "Common\Config\Towns\towns_FIN_NF.sqf";
		};
		((CTI_FIN_SIDE) call CTI_CO_FNC_GetSideFromID) call compile preprocessFileLineNumbers "Common\Config\Gear\Gear_FIN_NF.sqf";
	};
};
//CTI_CZ_SIDE declaration
if(CTI_CZ_SIDE >= 0) then {
	if(CTI_CSA_ADDON > 0) then {
		((CTI_CZ_SIDE) call CTI_CO_FNC_GetSideFromID) call compile preprocessFileLineNumbers "Common\Config\Units\units_CZ_CSA.sqf";
		((CTI_CZ_SIDE) call CTI_CO_FNC_GetSideFromID) call compile preprocessFileLineNumbers "Common\Config\Factories\factory_CZ_CSA.sqf";
		if((CTI_CZ_SIDE == 0 && CTI_WEST_AI < 0) || (CTI_CZ_SIDE == 1 && CTI_EAST_AI < 0)) then {
			((CTI_CZ_SIDE) call CTI_CO_FNC_GetSideFromID) call compile preprocessFileLineNumbers "Common\Config\Squads\squad_CZ_CSA.sqf";
		};
		if((CTI_CZ_SIDE == 0 && CTI_WEST_TOWNS < 0) || (CTI_CZ_SIDE == 1 && CTI_EAST_TOWNS < 0) || (CTI_CZ_SIDE == 2 && CTI_GUER_TOWNS == 2)) then {
			((CTI_CZ_SIDE) call CTI_CO_FNC_GetSideFromID) call compile preprocessFileLineNumbers "Common\Config\Towns\towns_CZ_CSA.sqf";
		};
		((CTI_CZ_SIDE) call CTI_CO_FNC_GetSideFromID) call compile preprocessFileLineNumbers "Common\Config\Gear\Gear_CZ_CSA.sqf";
	};
};
//CTI_JPN_SIDE declaration
if(CTI_JPN_SIDE >= 0) then {
	if(CTI_FOW_ADDON > 0) then {
		((CTI_JPN_SIDE) call CTI_CO_FNC_GetSideFromID) call compile preprocessFileLineNumbers "Common\Config\Units\units_JPN_FOW.sqf";
		((CTI_JPN_SIDE) call CTI_CO_FNC_GetSideFromID) call compile preprocessFileLineNumbers "Common\Config\Factories\factory_JPN_FOW.sqf";
		if((CTI_JPN_SIDE == 0 && CTI_WEST_AI < 0) || (CTI_JPN_SIDE == 1 && CTI_EAST_AI < 0)) then {
			((CTI_JPN_SIDE) call CTI_CO_FNC_GetSideFromID) call compile preprocessFileLineNumbers "Common\Config\Squads\squad_JPN_FOW.sqf";
		};
		if((CTI_JPN_SIDE == 0 && CTI_WEST_TOWNS < 0) || (CTI_JPN_SIDE == 1 && CTI_EAST_TOWNS < 0) || (CTI_JPN_SIDE == 2 && CTI_GUER_TOWNS == 2)) then {
			((CTI_JPN_SIDE) call CTI_CO_FNC_GetSideFromID) call compile preprocessFileLineNumbers "Common\Config\Towns\towns_JPN_FOW.sqf";
		};
		((CTI_JPN_SIDE) call CTI_CO_FNC_GetSideFromID) call compile preprocessFileLineNumbers "Common\Config\Gear\Gear_JPN_FOW.sqf";
	};
};
//CTI_UK_SIDE declaration
if(CTI_UK_SIDE >= 0) then {
	if(CTI_IFA_ADDON > 0) then {
		((CTI_UK_SIDE) call CTI_CO_FNC_GetSideFromID) call compile preprocessFileLineNumbers "Common\Config\Units\units_UK.sqf";
		((CTI_UK_SIDE) call CTI_CO_FNC_GetSideFromID) call compile preprocessFileLineNumbers "Common\Config\Factories\factory_UK.sqf";
		if((CTI_UK_SIDE == 0 && CTI_WEST_AI < 0) || (CTI_UK_SIDE == 1 && CTI_EAST_AI < 0)) then {
			((CTI_UK_SIDE) call CTI_CO_FNC_GetSideFromID) call compile preprocessFileLineNumbers "Common\Config\Squads\squad_UK.sqf";
		};
		if((CTI_UK_SIDE == 0 && CTI_WEST_TOWNS < 0) || (CTI_UK_SIDE == 1 && CTI_EAST_TOWNS < 0) || (CTI_UK_SIDE == 2 && CTI_GUER_TOWNS == 2)) then {
			((CTI_UK_SIDE) call CTI_CO_FNC_GetSideFromID) call compile preprocessFileLineNumbers "Common\Config\Towns\towns_UK.sqf";
		};
		((CTI_UK_SIDE) call CTI_CO_FNC_GetSideFromID) call compile preprocessFileLineNumbers "Common\Config\Gear\Gear_UK.sqf";
	};
	if(CTI_FOW_ADDON > 0) then {
		((CTI_UK_SIDE) call CTI_CO_FNC_GetSideFromID) call compile preprocessFileLineNumbers "Common\Config\Units\units_UK_FOW.sqf";
		((CTI_UK_SIDE) call CTI_CO_FNC_GetSideFromID) call compile preprocessFileLineNumbers "Common\Config\Factories\factory_UK_FOW.sqf";
		if((CTI_UK_SIDE == 0 && CTI_WEST_AI < 0) || (CTI_UK_SIDE == 1 && CTI_EAST_AI < 0)) then {
			((CTI_UK_SIDE) call CTI_CO_FNC_GetSideFromID) call compile preprocessFileLineNumbers "Common\Config\Squads\squad_UK_FOW.sqf";
		};
		if((CTI_UK_SIDE == 0 && CTI_WEST_TOWNS < 0) || (CTI_UK_SIDE == 1 && CTI_EAST_TOWNS < 0) || (CTI_UK_SIDE == 2 && CTI_GUER_TOWNS == 2)) then {
			((CTI_UK_SIDE) call CTI_CO_FNC_GetSideFromID) call compile preprocessFileLineNumbers "Common\Config\Towns\towns_UK_FOW.sqf";
		};
		((CTI_UK_SIDE) call CTI_CO_FNC_GetSideFromID) call compile preprocessFileLineNumbers "Common\Config\Gear\Gear_UK_FOW.sqf";
	};
	if(CTI_CSA_ADDON > 0) then {
		((CTI_UK_SIDE) call CTI_CO_FNC_GetSideFromID) call compile preprocessFileLineNumbers "Common\Config\Units\units_UK_CSA.sqf";
		((CTI_UK_SIDE) call CTI_CO_FNC_GetSideFromID) call compile preprocessFileLineNumbers "Common\Config\Factories\factory_UK_CSA.sqf";
		if((CTI_UK_SIDE == 0 && CTI_WEST_AI < 0) || (CTI_UK_SIDE == 1 && CTI_EAST_AI < 0)) then {
			((CTI_UK_SIDE) call CTI_CO_FNC_GetSideFromID) call compile preprocessFileLineNumbers "Common\Config\Squads\squad_UK_CSA.sqf";
		};
		if((CTI_UK_SIDE == 0 && CTI_WEST_TOWNS < 0) || (CTI_UK_SIDE == 1 && CTI_EAST_TOWNS < 0) || (CTI_UK_SIDE == 2 && CTI_GUER_TOWNS == 2)) then {
			((CTI_UK_SIDE) call CTI_CO_FNC_GetSideFromID) call compile preprocessFileLineNumbers "Common\Config\Towns\towns_UK_CSA.sqf";
		};
		((CTI_UK_SIDE) call CTI_CO_FNC_GetSideFromID) call compile preprocessFileLineNumbers "Common\Config\Gear\Gear_UK_CSA.sqf";
	};
};
//CTI_US_SIDE declaration
if(CTI_US_SIDE >= 0) then {
	if(CTI_SPE_DLC >= 1) then {
		((CTI_US_SIDE) call CTI_CO_FNC_GetSideFromID) call compile preprocessFileLineNumbers "Common\Config\Units\units_US_SPE.sqf";
		if([1175380] call CTI_CO_FNC_HasDLC) then {
			((CTI_US_SIDE) call CTI_CO_FNC_GetSideFromID) call compile preprocessFileLineNumbers "Common\Config\Factories\factory_US_SPE.sqf";
		};
		if((CTI_US_SIDE == 0 && CTI_WEST_AI < 0) || (CTI_US_SIDE >= 1 && CTI_EAST_AI < 0)) then {
			((CTI_US_SIDE) call CTI_CO_FNC_GetSideFromID) call compile preprocessFileLineNumbers "Common\Config\Squads\squad_US_SPE.sqf";
		};
		if((CTI_US_SIDE == 0 && CTI_WEST_TOWNS < 0) || (CTI_US_SIDE >= 1 && CTI_EAST_TOWNS < 0) || (CTI_US_SIDE == 2 && CTI_GUER_TOWNS == 2)) then {
			((CTI_US_SIDE) call CTI_CO_FNC_GetSideFromID) call compile preprocessFileLineNumbers "Common\Config\Towns\towns_US_SPE.sqf";
		};
		((CTI_US_SIDE) call CTI_CO_FNC_GetSideFromID) call compile preprocessFileLineNumbers "Common\Config\Gear\Gear_US_SPE.sqf";
	};
	if(CTI_IFA_ADDON > 0) then {
		((CTI_US_SIDE) call CTI_CO_FNC_GetSideFromID) call compile preprocessFileLineNumbers "Common\Config\Units\units_US.sqf";
		((CTI_US_SIDE) call CTI_CO_FNC_GetSideFromID) call compile preprocessFileLineNumbers "Common\Config\Factories\factory_US.sqf";
		if((CTI_US_SIDE == 0 && CTI_WEST_AI < 0) || (CTI_US_SIDE >= 1 && CTI_EAST_AI < 0)) then {
			((CTI_US_SIDE) call CTI_CO_FNC_GetSideFromID) call compile preprocessFileLineNumbers "Common\Config\Squads\squad_US.sqf";
		};
		if((CTI_US_SIDE == 0 && CTI_WEST_TOWNS < 0) || (CTI_US_SIDE >= 1 && CTI_EAST_TOWNS < 0) || (CTI_US_SIDE == 2 && CTI_GUER_TOWNS == 2)) then {
			((CTI_US_SIDE) call CTI_CO_FNC_GetSideFromID) call compile preprocessFileLineNumbers "Common\Config\Towns\towns_US.sqf";
		};
		((CTI_US_SIDE) call CTI_CO_FNC_GetSideFromID) call compile preprocessFileLineNumbers "Common\Config\Gear\Gear_US.sqf";
	};
	if(CTI_FOW_ADDON > 0) then {
		((CTI_US_SIDE) call CTI_CO_FNC_GetSideFromID) call compile preprocessFileLineNumbers "Common\Config\Units\units_US_FOW.sqf";
		((CTI_US_SIDE) call CTI_CO_FNC_GetSideFromID) call compile preprocessFileLineNumbers "Common\Config\Factories\factory_US_FOW.sqf";
		if((CTI_US_SIDE == 0 && CTI_WEST_AI < 0) || (CTI_US_SIDE >= 1 && CTI_EAST_AI < 0)) then {
			((CTI_US_SIDE) call CTI_CO_FNC_GetSideFromID) call compile preprocessFileLineNumbers "Common\Config\Squads\squad_US_FOW.sqf";
		};
		if((CTI_US_SIDE == 0 && CTI_WEST_TOWNS < 0) || (CTI_US_SIDE >= 1 && CTI_EAST_TOWNS < 0) || (CTI_US_SIDE == 2 && CTI_GUER_TOWNS == 2)) then {
			((CTI_US_SIDE) call CTI_CO_FNC_GetSideFromID) call compile preprocessFileLineNumbers "Common\Config\Towns\towns_US_FOW.sqf";
		};
		((CTI_US_SIDE) call CTI_CO_FNC_GetSideFromID) call compile preprocessFileLineNumbers "Common\Config\Gear\Gear_US_FOW.sqf";
	};
};
//CTI_SOV_SIDE declaration
if(CTI_SOV_SIDE >= 0) then {
	if(CTI_IFA_ADDON > 0) then {
		((CTI_SOV_SIDE) call CTI_CO_FNC_GetSideFromID) call compile preprocessFileLineNumbers "Common\Config\Units\units_SOV.sqf";
		((CTI_SOV_SIDE) call CTI_CO_FNC_GetSideFromID) call compile preprocessFileLineNumbers "Common\Config\Factories\factory_SOV.sqf";
		if((CTI_SOV_SIDE == 0 && CTI_WEST_AI < 0) || (CTI_SOV_SIDE == 1 && CTI_EAST_AI < 0)) then {
			((CTI_SOV_SIDE) call CTI_CO_FNC_GetSideFromID) call compile preprocessFileLineNumbers "Common\Config\Squads\squad_SOV.sqf";
		};
		if((CTI_SOV_SIDE == 0 && CTI_WEST_TOWNS < 0) || (CTI_SOV_SIDE == 1 && CTI_EAST_TOWNS < 0) || (CTI_SOV_SIDE == 2 && CTI_GUER_TOWNS == 2)) then {
			((CTI_SOV_SIDE) call CTI_CO_FNC_GetSideFromID) call compile preprocessFileLineNumbers "Common\Config\Towns\towns_SOV.sqf";
		};
		((CTI_SOV_SIDE) call CTI_CO_FNC_GetSideFromID) call compile preprocessFileLineNumbers "Common\Config\Gear\Gear_SOV.sqf";
	};
	/*if(CTI_FOW_ADDON > 0) then {
		((CTI_SOV_SIDE) call CTI_CO_FNC_GetSideFromID) call compile preprocessFileLineNumbers "Common\Config\Units\units_SOV.sqf";
		((CTI_SOV_SIDE) call CTI_CO_FNC_GetSideFromID) call compile preprocessFileLineNumbers "Common\Config\Factories\factory_SOV.sqf";
		if((CTI_SOV_SIDE == 0 && CTI_WEST_AI < 0) || (CTI_SOV_SIDE == 1 && CTI_EAST_AI < 0)) then {
			((CTI_SOV_SIDE) call CTI_CO_FNC_GetSideFromID) call compile preprocessFileLineNumbers "Common\Config\Squads\squad_SOV.sqf";
		};
		if((CTI_SOV_SIDE == 0 && CTI_WEST_TOWNS < 0) || (CTI_SOV_SIDE == 1 && CTI_EAST_TOWNS < 0) || (CTI_SOV_SIDE == 2 && CTI_GUER_TOWNS == 2)) then {
			((CTI_SOV_SIDE) call CTI_CO_FNC_GetSideFromID) call compile preprocessFileLineNumbers "Common\Config\Towns\towns_SOV.sqf";
		};
	};*/
	if(CTI_NF_ADDON > 0) then {
		((CTI_SOV_SIDE) call CTI_CO_FNC_GetSideFromID) call compile preprocessFileLineNumbers "Common\Config\Units\units_SOV_NF.sqf";
		((CTI_SOV_SIDE) call CTI_CO_FNC_GetSideFromID) call compile preprocessFileLineNumbers "Common\Config\Factories\factory_SOV_NF.sqf";
		if((CTI_SOV_SIDE == 0 && CTI_WEST_AI < 0) || (CTI_SOV_SIDE == 1 && CTI_EAST_AI < 0)) then {
			((CTI_SOV_SIDE) call CTI_CO_FNC_GetSideFromID) call compile preprocessFileLineNumbers "Common\Config\Squads\squad_SOV_NF.sqf";
		};
		if((CTI_SOV_SIDE == 0 && CTI_WEST_TOWNS < 0) || (CTI_SOV_SIDE == 1 && CTI_EAST_TOWNS < 0) || (CTI_SOV_SIDE == 2 && CTI_GUER_TOWNS == 2)) then {
			((CTI_SOV_SIDE) call CTI_CO_FNC_GetSideFromID) call compile preprocessFileLineNumbers "Common\Config\Towns\towns_SOV_NF.sqf";
		};
		((CTI_SOV_SIDE) call CTI_CO_FNC_GetSideFromID) call compile preprocessFileLineNumbers "Common\Config\Gear\Gear_SOV_NF.sqf";
	};
};
//CTI_GER_SIDE declaration
if(CTI_GER_SIDE >= 0) then {
	if(CTI_SPE_DLC >= 1) then {
		((CTI_GER_SIDE) call CTI_CO_FNC_GetSideFromID) call compile preprocessFileLineNumbers "Common\Config\Units\units_GER_SPE.sqf";
		if([1175380] call CTI_CO_FNC_HasDLC) then {
			((CTI_GER_SIDE) call CTI_CO_FNC_GetSideFromID) call compile preprocessFileLineNumbers "Common\Config\Factories\factory_GER_SPE.sqf";
		};
		if((CTI_GER_SIDE == 0 && CTI_WEST_AI < 0) || (CTI_GER_SIDE == 1 && CTI_EAST_AI < 0)) then {
			((CTI_GER_SIDE) call CTI_CO_FNC_GetSideFromID) call compile preprocessFileLineNumbers "Common\Config\Squads\squad_GER_SPE.sqf";
		};
		if((CTI_GER_SIDE == 0 && CTI_WEST_TOWNS < 0) || (CTI_GER_SIDE == 1 && CTI_EAST_TOWNS < 0) || (CTI_GER_SIDE == 2 && CTI_GUER_TOWNS == 2)) then {
			((CTI_GER_SIDE) call CTI_CO_FNC_GetSideFromID) call compile preprocessFileLineNumbers "Common\Config\Towns\towns_GER_SPE.sqf";
		};
		((CTI_GER_SIDE) call CTI_CO_FNC_GetSideFromID) call compile preprocessFileLineNumbers "Common\Config\Gear\Gear_GER_SPE.sqf";
	};
	if(CTI_IFA_ADDON > 0) then {
		((CTI_GER_SIDE) call CTI_CO_FNC_GetSideFromID) call compile preprocessFileLineNumbers "Common\Config\Units\units_GER.sqf";
		((CTI_GER_SIDE) call CTI_CO_FNC_GetSideFromID) call compile preprocessFileLineNumbers "Common\Config\Factories\factory_GER.sqf";
		if((CTI_GER_SIDE == 0 && CTI_WEST_AI < 0) || (CTI_GER_SIDE == 1 && CTI_EAST_AI < 0)) then {
			((CTI_GER_SIDE) call CTI_CO_FNC_GetSideFromID) call compile preprocessFileLineNumbers "Common\Config\Squads\squad_GER.sqf";
		};
		if((CTI_GER_SIDE == 0 && CTI_WEST_TOWNS < 0) || (CTI_GER_SIDE == 1 && CTI_EAST_TOWNS < 0) || (CTI_GER_SIDE == 2 && CTI_GUER_TOWNS == 2)) then {
			((CTI_GER_SIDE) call CTI_CO_FNC_GetSideFromID) call compile preprocessFileLineNumbers "Common\Config\Towns\towns_GER.sqf";
		};
		((CTI_GER_SIDE) call CTI_CO_FNC_GetSideFromID) call compile preprocessFileLineNumbers "Common\Config\Gear\Gear_GER.sqf";
	};
	if(CTI_FOW_ADDON > 0) then {
		((CTI_GER_SIDE) call CTI_CO_FNC_GetSideFromID) call compile preprocessFileLineNumbers "Common\Config\Units\units_GER_FOW.sqf";
		((CTI_GER_SIDE) call CTI_CO_FNC_GetSideFromID) call compile preprocessFileLineNumbers "Common\Config\Factories\factory_GER_FOW.sqf";
		if((CTI_GER_SIDE == 0 && CTI_WEST_AI < 0) || (CTI_GER_SIDE == 1 && CTI_EAST_AI < 0)) then {
			((CTI_GER_SIDE) call CTI_CO_FNC_GetSideFromID) call compile preprocessFileLineNumbers "Common\Config\Squads\squad_GER_FOW.sqf";
		};
		if((CTI_GER_SIDE == 0 && CTI_WEST_TOWNS < 0) || (CTI_GER_SIDE == 1 && CTI_EAST_TOWNS < 0) || (CTI_GER_SIDE == 2 && CTI_GUER_TOWNS == 2)) then {
			((CTI_GER_SIDE) call CTI_CO_FNC_GetSideFromID) call compile preprocessFileLineNumbers "Common\Config\Towns\towns_GER_FOW.sqf";
		};
		((CTI_GER_SIDE) call CTI_CO_FNC_GetSideFromID) call compile preprocessFileLineNumbers "Common\Config\Gear\Gear_GER_FOW.sqf";
	};
	if(CTI_CSA_ADDON > 0) then {
		((CTI_GER_SIDE) call CTI_CO_FNC_GetSideFromID) call compile preprocessFileLineNumbers "Common\Config\Units\units_GER_CSA.sqf";
		((CTI_GER_SIDE) call CTI_CO_FNC_GetSideFromID) call compile preprocessFileLineNumbers "Common\Config\Factories\factory_GER_CSA.sqf";
		if((CTI_GER_SIDE == 0 && CTI_WEST_AI < 0) || (CTI_GER_SIDE == 1 && CTI_EAST_AI < 0)) then {
			((CTI_GER_SIDE) call CTI_CO_FNC_GetSideFromID) call compile preprocessFileLineNumbers "Common\Config\Squads\squad_GER_CSA.sqf";
		};
		if((CTI_GER_SIDE == 0 && CTI_WEST_TOWNS < 0) || (CTI_GER_SIDE == 1 && CTI_EAST_TOWNS < 0) || (CTI_GER_SIDE == 2 && CTI_GUER_TOWNS == 2)) then {
			((CTI_GER_SIDE) call CTI_CO_FNC_GetSideFromID) call compile preprocessFileLineNumbers "Common\Config\Towns\towns_GER_CSA.sqf";
		};
		((CTI_GER_SIDE) call CTI_CO_FNC_GetSideFromID) call compile preprocessFileLineNumbers "Common\Config\Gear\Gear_GER_CSA.sqf";
	};
};

switch(CTI_GUER_TOWNS) do {
	case 0: {
		if(CTI_SPE_DLC >= 1) then {
			((resistance) call CTI_CO_FNC_GetSideFromID) call compile preprocessFileLineNumbers "Common\Config\Units\units_FFI_SPE.sqf";
			((resistance) call CTI_CO_FNC_GetSideFromID) call compile preprocessFileLineNumbers "Common\Config\Towns\towns_FFI_SPE.sqf";
		};
		if(CTI_IFA_ADDON >= 1) then {
			((resistance) call CTI_CO_FNC_GetSideFromID) call compile preprocessFileLineNumbers "Common\Config\Units\units_FFI.sqf";
			((resistance) call CTI_CO_FNC_GetSideFromID) call compile preprocessFileLineNumbers "Common\Config\Towns\towns_FFI.sqf";
		};
	};
	case 1: {
		if(CTI_CSA_ADDON > 0) then {
			((resistance) call CTI_CO_FNC_GetSideFromID) call compile preprocessFileLineNumbers "Common\Config\Units\units_POL_CSA.sqf";
			((resistance) call CTI_CO_FNC_GetSideFromID) call compile preprocessFileLineNumbers "Common\Config\Towns\towns_POL_CSA.sqf";
		};
		if(CTI_IFA_ADDON > 0) then {
			((resistance) call CTI_CO_FNC_GetSideFromID) call compile preprocessFileLineNumbers "Common\Config\Units\units_POL.sqf";
			((resistance) call CTI_CO_FNC_GetSideFromID) call compile preprocessFileLineNumbers "Common\Config\Towns\towns_POL.sqf";
		};
	};
	default {};
};

{
	if(_x >= 0) then {
		switch(_x) do {
			case 0: {
				((CTI_GER_SIDE) call CTI_CO_FNC_GetSideFromID) call compile preprocessFileLineNumbers "Common\Config\Towns\towns_GER.sqf";
			};
			case 1: {
				((CTI_SOV_SIDE) call CTI_CO_FNC_GetSideFromID) call compile preprocessFileLineNumbers "Common\Config\Towns\towns_SOV.sqf";
			};
			case 2: {
				((CTI_US_SIDE) call CTI_CO_FNC_GetSideFromID) call compile preprocessFileLineNumbers "Common\Config\Towns\towns_US.sqf";
			};
			case 3: {
				((CTI_UK_SIDE) call CTI_CO_FNC_GetSideFromID) call compile preprocessFileLineNumbers "Common\Config\Towns\towns_UK.sqf";
			};
			case 4: {
				((CTI_GER_SIDE) call CTI_CO_FNC_GetSideFromID) call compile preprocessFileLineNumbers "Common\Config\Towns\towns_GER_FOW.sqf";
			};
			case 5: {
				((CTI_JPN_SIDE) call CTI_CO_FNC_GetSideFromID) call compile preprocessFileLineNumbers "Common\Config\Towns\towns_JPN_FOW.sqf";
			};
			case 6: {
				((CTI_US_SIDE) call CTI_CO_FNC_GetSideFromID) call compile preprocessFileLineNumbers "Common\Config\Towns\towns_US_FOW.sqf";
			};
			case 7: {
				((CTI_UK_SIDE) call CTI_CO_FNC_GetSideFromID) call compile preprocessFileLineNumbers "Common\Config\Towns\towns_UK_FOW.sqf";
			};
			case 8: {
				((CTI_GER_SIDE) call CTI_CO_FNC_GetSideFromID) call compile preprocessFileLineNumbers "Common\Config\Towns\towns_GER_CSA.sqf";
			};
			case 9: {
				((CTI_CZ_SIDE) call CTI_CO_FNC_GetSideFromID) call compile preprocessFileLineNumbers "Common\Config\Towns\towns_CZ_CSA.sqf";
			};
			case 10: {
				((CTI_UK_SIDE) call CTI_CO_FNC_GetSideFromID) call compile preprocessFileLineNumbers "Common\Config\Towns\towns_UK_CSA.sqf";
			};
			case 11: {
				((CTI_FIN_SIDE) call CTI_CO_FNC_GetSideFromID) call compile preprocessFileLineNumbers "Common\Config\Towns\towns_FIN_NF.sqf";
			};
			case 12: {
				((CTI_SOV_SIDE) call CTI_CO_FNC_GetSideFromID) call compile preprocessFileLineNumbers "Common\Config\Towns\towns_SOV_NF.sqf";
			};
			case 13: {
				if(CTI_SPE_DLC >= 1) then {
					((CTI_US_SIDE) call CTI_CO_FNC_GetSideFromID) call compile preprocessFileLineNumbers "Common\Config\Towns\towns_FR_SPE.sqf";
				};
			};
			case 14: {
				if(CTI_SPE_DLC >= 1) then {
					((CTI_US_SIDE) call CTI_CO_FNC_GetSideFromID) call compile preprocessFileLineNumbers "Common\Config\Towns\towns_GER_SPE.sqf";
				};
			};
			case 15: {
				if(CTI_SPE_DLC >= 1) then {
					((CTI_US_SIDE) call CTI_CO_FNC_GetSideFromID) call compile preprocessFileLineNumbers "Common\Config\Towns\towns_US_SPE.sqf";
				};
			};
			default {};
		};
	};
}forEach [CTI_WEST_TOWNS, CTI_EAST_TOWNS];
{
	if(_x >= 0) then {
		switch(_x) do {
			case 0: {
				((CTI_GER_SIDE) call CTI_CO_FNC_GetSideFromID) call compile preprocessFileLineNumbers "Common\Config\Squads\squad_GER.sqf";
			};
			case 1: {
				((CTI_SOV_SIDE) call CTI_CO_FNC_GetSideFromID) call compile preprocessFileLineNumbers "Common\Config\Squads\squad_SOV.sqf";
			};
			case 2: {
				((CTI_US_SIDE) call CTI_CO_FNC_GetSideFromID) call compile preprocessFileLineNumbers "Common\Config\Squads\squad_US.sqf";
			};
			case 3: {
				((CTI_UK_SIDE) call CTI_CO_FNC_GetSideFromID) call compile preprocessFileLineNumbers "Common\Config\Squads\squad_UK.sqf";
			};
			case 4: {
				((CTI_GER_SIDE) call CTI_CO_FNC_GetSideFromID) call compile preprocessFileLineNumbers "Common\Config\Squads\squad_GER_FOW.sqf";
			};
			case 5: {
				((CTI_JPN_SIDE) call CTI_CO_FNC_GetSideFromID) call compile preprocessFileLineNumbers "Common\Config\Squads\squad_JPN_FOW.sqf";
			};
			case 6: {
				((CTI_US_SIDE) call CTI_CO_FNC_GetSideFromID) call compile preprocessFileLineNumbers "Common\Config\Squads\squad_US_FOW.sqf";
			};
			case 7: {
				((CTI_UK_SIDE) call CTI_CO_FNC_GetSideFromID) call compile preprocessFileLineNumbers "Common\Config\Squads\squad_UK_FOW.sqf";
			};
			case 8: {
				((CTI_GER_SIDE) call CTI_CO_FNC_GetSideFromID) call compile preprocessFileLineNumbers "Common\Config\Squads\squad_GER_CSA.sqf";
			};
			case 9: {
				((CTI_CZ_SIDE) call CTI_CO_FNC_GetSideFromID) call compile preprocessFileLineNumbers "Common\Config\Squads\squad_CZ_CSA.sqf";
			};
			case 10: {
				((CTI_UK_SIDE) call CTI_CO_FNC_GetSideFromID) call compile preprocessFileLineNumbers "Common\Config\Squads\squad_UK_CSA.sqf";
			};
			case 11: {
				((CTI_FIN_SIDE) call CTI_CO_FNC_GetSideFromID) call compile preprocessFileLineNumbers "Common\Config\Squads\squad_FIN_NF.sqf";
			};
			case 12: {
				((CTI_SOV_SIDE) call CTI_CO_FNC_GetSideFromID) call compile preprocessFileLineNumbers "Common\Config\Squads\squad_SOV_NF.sqf";
			};
			case 13: {
				if(CTI_SPE_DLC >= 1) then {
					((CTI_US_SIDE) call CTI_CO_FNC_GetSideFromID) call compile preprocessFileLineNumbers "Common\Config\Squads\squad_FR_SPE.sqf";
				};
			};
			case 14: {
				if(CTI_SPE_DLC >= 1) then {
					((CTI_US_SIDE) call CTI_CO_FNC_GetSideFromID) call compile preprocessFileLineNumbers "Common\Config\Squads\squad_GER_SPE.sqf";
				};
			};
			case 15: {
				if(CTI_SPE_DLC >= 1) then {
					((CTI_US_SIDE) call CTI_CO_FNC_GetSideFromID) call compile preprocessFileLineNumbers "Common\Config\Squads\squad_US_SPE.sqf";
				};
			};
			default {};
		};
	};
}forEach [CTI_WEST_AI, CTI_EAST_AI];

{
	(_x) call compile preprocessFileLineNumbers "Common\Config\Units\units_small_mods.sqf";
	(_x) call compile preprocessFileLineNumbers "Common\Config\Factories\factory_small_mods.sqf";
	(_x) call compile preprocessFileLineNumbers "Common\Config\Towns\towns_small_mods.sqf";
	(_x) call compile preprocessFileLineNumbers "Common\Config\Squads\squad_small_mods.sqf";
	
	(_x) call compile preprocessFileLineNumbers "Common\Config\Units\units_IFA_Naval.sqf";
	(_x) call compile preprocessFileLineNumbers "Common\Config\Factories\factory_IFA_Naval.sqf";
} forEach [west,east,resistance];

call compile preprocessFileLineNumbers "Common\Config\Pylons\pylons.sqf";

(west) call compile preprocessFileLineNumbers "Common\Config\Upgrades\Upgrades.sqf";
(east) call compile preprocessFileLineNumbers "Common\Config\Upgrades\Upgrades.sqf";

//--- Network communication handler
"CTI_NetCom" addPublicVariableEventHandler {(_this select 1) Spawn CTI_CO_FNC_OnPVFReceived};

//--- Respawn markers
createMarkerLocal ["respawn_east",getMarkerPos "CTI_EastRespawn"];
"respawn_east" setMarkerColorLocal "ColorRed";
"respawn_east" setMarkerShapeLocal "RECTANGLE";
"respawn_east" setMarkerBrushLocal "BORDER";
"respawn_east" setMarkerSizeLocal [10,10];
"respawn_east" setMarkerAlphaLocal 0;
createMarkerLocal ["respawn_west",getMarkerPos "CTI_WestRespawn"];
"respawn_west" setMarkerColorLocal "ColorGreen";
"respawn_west" setMarkerShapeLocal "RECTANGLE";
"respawn_west" setMarkerBrushLocal "BORDER";
"respawn_west" setMarkerSizeLocal [10,10];
"respawn_west" setMarkerAlphaLocal 0;

//--- Town Camps and Depots
Call Compile preprocessFileLineNumbers 'Common\Config\Core_Models\Vanilla.sqf';
CTI_Logic_Camp = "LocationCamp_F";
CTI_Logic_Depot = "LocationArea_F";

//--- If money is the only resource, multiply the building cost.
if ((missionNamespace getVariable "CTI_ECONOMY_CURRENCY_SYSTEM") == 1) then {
	Private ["_cost", "_var"];
	{
		{
				_var = missionNamespace getVariable _x;
				_cost = (_var select 2) * 5;
				_var set [2, _cost];
		} forEach (missionNamespace getVariable format ["CTI_%1_STRUCTURES", _x]) + (missionNamespace getVariable format ["CTI_%1_HQSTRUCTURE", _x]);
	} forEach [east, west];
};
